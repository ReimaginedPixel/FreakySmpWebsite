<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Freaky SMP Website</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="fonts/fonts.css">
</head>
<body>
    <!-- Header with logo and navigation -->
    <header class="blurred-header">
        <a href="#" id="logo-link">
            <img src="assets/images/logo.png" alt="Logo" id="logo">
        </a>
        <nav class="main-nav">
            <div class="nav-item">
                <a href="#what" class="nav-link">
                    What is Freaky SMP?
                    <img src="assets/images/nav-what.png" alt="" class="nav-img">
                </a>
            </div>
            <div class="nav-item">
                <a href="#about" class="nav-link">
                    About
                    <img src="assets/images/nav-about.png" alt="" class="nav-img">
                </a>
            </div>
            <div class="nav-item">
                <a href="#players" class="nav-link">
                    Players
                    <img src="assets/images/nav-players.png" alt="" class="nav-img">
                </a>
            </div>
            <div class="nav-item">
                <a href="#gallery" class="nav-link">
                    Gallery
                    <img src="assets/images/nav-lore.png" alt="" class="nav-img">
                </a>
            </div>
        </nav>
    </header>

    <!-- Group photo at the top, full width -->
    <img src="assets/images/group4.png" alt="Group Photo" class="group-photo">

    <!-- Start Exploring button -->
    <div class="start-exploring-container">
        <button class="start-exploring-btn" onclick="document.getElementById('what').scrollIntoView({behavior:'smooth'})">
            <span>Start Exploring</span>
            <img src="assets/images/down-arrow.png" alt="Down Arrow" class="start-exploring-arrow">
        </button>
    </div>

    <!-- What is Freaky SMP? section -->
    <section id="what" class="section-what">
        <div class="what-content">
            <div class="what-text">
                <h2>What is Freaky SMP?</h2>
                <p>
                    Freaky SMP began when I switched schools and wanted to create a fun way for my new classmates to connect. With voice chat and a chill vibe, it quickly became a hit. What started as a simple server turned into a thriving world with multiple seasons and an awesome group of players.
                    <br><br>
                    A lot of people really wanted to play, but over time the server got fewer players and more cheaters. It even became a meme to nuke the server. But in the end, that’s what made Freaky SMP stand out — the chaos, the memories, and the fact that it was a completely unique experience.
                </p>
            </div>
            <div class="what-image-stack">
                <div class="what-image-col">
                    <div class="img-hover-wrap">
                        <img src="assets/images/what-freakysmp-1.png" alt="Freaky SMP 1" data-hover="FreakySMP sezon 1 start" />
                        <div class="img-hover-label">FreakySMP sezon 1 start</div>
                    </div>
                    <div class="img-hover-wrap">
                        <img src="assets/images/what-freakysmp-2.png" alt="Freaky SMP 2" data-hover="FreakySMP sezon 2 start" />
                        <div class="img-hover-label">FreakySMP sezon 2 start</div>
                    </div>
                </div>
                <div class="what-image-col">
                    <div class="img-hover-wrap">
                        <img src="assets/images/what-freakysmp-3.png" alt="Freaky SMP 3" data-hover="FreakySMP sezon 3 start" />
                        <div class="img-hover-label">FreakySMP sezon 3 start</div>
                    </div>
                    <div class="img-hover-wrap">
                        <img src="assets/images/what-freakysmp-4.png" alt="Freaky SMP 4" data-hover="FreakySMP sezon 4 start" />
                        <div class="img-hover-label">FreakySMP sezon 4 start</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About section -->
    <section id="about" class="section-about">
        <div class="about-content">
            <div class="about-image">
                <img src="assets/images/about-project.png" alt="About This Project" class="about-image-big" />
            </div>
            <div class="about-text">
                <h2>About This Project</h2>
                <p>
                    This project started as a small idea to bring people together through Minecraft. Over time, it grew into a community-driven experience full of creativity, chaos, and unforgettable memories. It's more than just a server — it's a story we've all written together.
                </p>
            </div>
        </div>
    </section>

    <!-- Players section -->
    <section id="players" class="section-players">
        <div class="players-intro">
            <h2>Players</h2>
            <p>Meet the members of Freaky SMP! (sezon 1 & 2) Click the arrow to see more info.</p>
        </div>
        <div class="players-grid">
            <div class="player-box">
                <div class="player-main">
                    <img class="player-avatar" src="assets/images/players/player1.png" alt="Player 1">
                    <span class="player-name">ReimaginedPixel</span>
                    <button class="player-toggle" aria-label="Show more">&#9660;</button>
                </div>
                <div class="player-dropdown">
                    <div class="player-dropdown-inner">
                        <p>Creator Of FreakySMP, and this website you are on!</p>
                    </div>
                </div>
            </div>
            <div class="player-box">
                <div class="player-main">
                    <img class="player-avatar" src="assets/images/players/player2.png" alt="Player 2">
                    <span class="player-name">Mr_Tostus</span>
                    <button class="player-toggle" aria-label="Show more">&#9660;</button>
                </div>
                <div class="player-dropdown">
                    <div class="player-dropdown-inner">
                        <p>Mainly a helper and active mod.</p>
                    </div>
                </div>
            </div>
            <div class="player-box">
                <div class="player-main">
                    <img class="player-avatar" src="assets/images/players/player3.png" alt="Player 3">
                    <span class="player-name">5P0RT5Y</span>
                    <button class="player-toggle" aria-label="Show more">&#9660;</button>
                </div>
                <div class="player-dropdown">
                    <div class="player-dropdown-inner">
                        <p>Friend That Played on the first sezon, and a bit after publishing freakysmp to friends.</p>
                    </div>
                </div>
            </div>
            <div class="player-box">
                <div class="player-main">
                    <img class="player-avatar" src="assets/images/players/player4.png" alt="Player 4">
                    <span class="player-name">Papik__</span>
                    <button class="player-toggle" aria-label="Show more">&#9660;</button>
                </div>
                <div class="player-dropdown">
                    <div class="player-dropdown-inner">
                        <p>Mainly a pvper.</p>
                    </div>
                </div>
            </div>
            <div class="player-box">
                <div class="player-main">
                    <img class="player-avatar" src="assets/images/players/player5.png" alt="Player 5">
                    <span class="player-name">Marcelk112</span>
                    <button class="player-toggle" aria-label="Show more">&#9660;</button>
                </div>
                <div class="player-dropdown">
                    <div class="player-dropdown-inner">
                        <p>Builder & pvper.</p>
                    </div>
                </div>
            </div>
            <div class="player-box">
                <div class="player-main">
                    <img class="player-avatar" src="assets/images/players/player6.png" alt="Player 6">
                    <span class="player-name">Nolli_DS</span>
                    <button class="player-toggle" aria-label="Show more">&#9660;</button>
                </div>
                <div class="player-dropdown">
                    <div class="player-dropdown-inner">
                        <p>One of the most active players.. But also one of the most destructive players</p>
                    </div>
                </div>
            </div>
            <div class="player-box">
                <div class="player-main">
                    <img class="player-avatar" src="assets/images/players/player7.png" alt="Player 7">
                    <span class="player-name">Marcelik10</span>
                    <button class="player-toggle" aria-label="Show more">&#9660;</button>
                </div>
                <div class="player-dropdown">
                    <div class="player-dropdown-inner">
                        <p>Passions: Cheats</p>
                    </div>
                </div>
            </div>
            <div class="player-box">
                <div class="player-main">
                    <img class="player-avatar" src="assets/images/players/player8.png" alt="Player 8">
                    <span class="player-name">Siwijfdmjm</span>
                    <button class="player-toggle" aria-label="Show more">&#9660;</button>
                </div>
                <div class="player-dropdown">
                    <div class="player-dropdown-inner">
                        <p>Bro nuked 2 sezons- damn nice job pulling this off.</p>
                    </div>
                </div>
            </div>
            <div class="player-box">
                <div class="player-main">
                    <img class="player-avatar" src="assets/images/players/player9.png" alt="Player 9">
                    <span class="player-name">JesieniaraKuba</span>
                    <button class="player-toggle" aria-label="Show more">&#9660;</button>
                </div>
                <div class="player-dropdown">
                    <div class="player-dropdown-inner">
                        <p>Chill Player, Building and just enjoing life</p>
                    </div>
                </div>
            </div>
            <div class="player-box">
                <div class="player-main">
                    <img class="player-avatar" src="assets/images/players/player10.png" alt="Player 10">
                    <span class="player-name">M1K1</span>
                    <button class="player-toggle" aria-label="Show more">&#9660;</button>
                </div>
                <div class="player-dropdown">
                    <div class="player-dropdown-inner">
                        <p>Played First sezon and never again :(</p>
                    </div>
                </div>
            </div>
            <div class="player-box">
                <div class="player-main">
                    <img class="player-avatar" src="assets/images/players/player11.png" alt="Player 11">
                    <span class="player-name">PijeCisowianke</span>
                    <button class="player-toggle" aria-label="Show more">&#9660;</button>
                </div>
                <div class="player-dropdown">
                    <div class="player-dropdown-inner">
                        <p>The Star of freakysmp (loves pvp with spaming axes).</p>
                    </div>
                </div>
            </div>
            <div class="player-box">
                <div class="player-main">
                    <img class="player-avatar" src="assets/images/players/player12.png" alt="Player 12">
                    <span class="player-name">Marcinpolando</span>
                    <button class="player-toggle" aria-label="Show more">&#9660;</button>
                </div>
                <div class="player-dropdown">
                    <div class="player-dropdown-inner">
                        <p>this bro was playing on freakysmp???.</p>
                    </div>
                </div>
            </div>
            <div class="player-box">
                <div class="player-main">
                    <img class="player-avatar" src="assets/images/players/player13.png" alt="Player 13">
                    <span class="player-name">Deenichh</span>
                    <button class="player-toggle" aria-label="Show more">&#9660;</button>
                </div>
                <div class="player-dropdown">
                    <div class="player-dropdown-inner">
                        <p>" 100%% "</p>
                    </div>
                </div>
            </div>
            <div class="player-box">
                <div class="player-main">
                    <img class="player-avatar" src="assets/images/players/player14.png" alt="Player 14">
                    <span class="player-name">Hubsonion</span>
                    <button class="player-toggle" aria-label="Show more">&#9660;</button>
                </div>
                <div class="player-dropdown">
                    <div class="player-dropdown-inner">
                        <p>Wanted to have the most deaths (falied horribly).</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Gallery section -->
    <section id="gallery" class="section-gallery">
        <div class="gallery-content">
            <h2>Gallery</h2>
            <p class="gallery-intro">Check out some of our best moments, videos, and screenshots from Freaky SMP!</p>
            <div class="gallery-videos">
                <h3>YouTube Videos</h3>
                <div class="gallery-videos-grid">
                    <div class="gallery-video">
                        <iframe width="360" height="202" src="https://www.youtube.com/embed/Bwhid2g7S7k" title="Freaky SMP Video 1" frameborder="0" allowfullscreen></iframe>
                    </div>
                    <div class="gallery-video">
                        <iframe width="360" height="202" src="https://www.youtube.com/embed/1vrImEDGMGc" title="Freaky SMP Video 2" frameborder="0" allowfullscreen></iframe>
                    </div>
                    <div class="gallery-video">
                        <iframe width="360" height="202" src="https://www.youtube.com/embed/9_jzsPLX948" title="Freaky SMP Video 3" frameborder="0" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
            <div class="gallery-images">
                <h3>Screenshots</h3>
                <div class="gallery-images-grid" id="gallery-images-grid">
                    <img src="assets/images/gallery1.png" alt="Somone Troling Friends With an alt account" class="gallery-img">
                    <img src="assets/images/gallery2.png" alt="Bro loves sugar" class="gallery-img">
                    <img src="assets/images/gallery3.png" alt="spongebob?" class="gallery-img">
                    <!-- Hidden images, revealed on button click -->
                    <img src="assets/images/gallery4.png" alt="Nether Exploring" class="gallery-img gallery-img-extra" style="display:none;">
                    <img src="assets/images/gallery5.png" alt="Sus signs around.." class="gallery-img gallery-img-extra" style="display:none;">
                    <img src="assets/images/gallery6.png" alt="Some Kind Of statue i guess" class="gallery-img gallery-img-extra" style="display:none;">
                    <img src="assets/images/gallery7.png" alt="''Femboy'' Factions Base" class="gallery-img gallery-img-extra" style="display:none;">
                    <img src="assets/images/gallery8.png" alt="Eye Boss Room" class="gallery-img gallery-img-extra" style="display:none;">
                    <img src="assets/images/gallery9.png" alt="PvP event" class="gallery-img gallery-img-extra" style="display:none;">
                </div>
                <div style="text-align:center; margin-top:18px;">
                    <button id="show-more-screenshots" style="font-family:'Minecraft',Arial,sans-serif;font-size:1.1rem;padding:10px 28px;border-radius:8px;border:2px solid #222;background:#eee;cursor:pointer;transition:background 0.18s;">Show More</button>
                    <button id="show-less-screenshots" style="display:none;font-family:'Minecraft',Arial,sans-serif;font-size:1.1rem;padding:10px 28px;border-radius:8px;border:2px solid #222;background:#eee;cursor:pointer;transition:background 0.18s;">Show Less</button>
                </div>
            </div>
            <div class="gallery-funny">
                <h3>Clips & Funny Moments</h3>
                <div class="gallery-funny-grid">
                    <video class="gallery-clip" controls width="320">
                        <source src="assets/clips/funny1.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <video class="gallery-clip" controls width="320">
                        <source src="assets/clips/funny2.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <video class="gallery-clip" controls width="320">
                        <source src="assets/clips/funny3.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                </div>
            </div>
        </div>
    </section>

    <!-- Add GSAP CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollToPlugin.min.js"></script>
    <script src="js/main.js"></script>
    <script>
    // Add GSAP hover animation for image labels
    document.querySelectorAll('.img-hover-wrap').forEach(function(wrap) {
        const img = wrap.querySelector('img');
        const label = wrap.querySelector('.img-hover-label');
        label.style.opacity = 0;
        label.style.transform = 'translateY(20px)';
        let hoverTimeout;

        // Only zoom in, do not follow mouse position
        img.addEventListener('mouseenter', function() {
            clearTimeout(hoverTimeout);
            img.style.transition = 'transform 0.28s cubic-bezier(.77,0,.18,1)';
            img.style.transform = 'scale(1.13)';
            img.style.transformOrigin = '50% 50%';
            gsap.to(label, { opacity: 1, y: 0, duration: 0.35, ease: "power2.out" });
        });
        img.addEventListener('mouseleave', function() {
            clearTimeout(hoverTimeout);
            img.style.transform = '';
            img.style.transformOrigin = '';
            img.style.transition = '';
            gsap.to(label, { opacity: 0, y: 20, duration: 0.18, ease: "power2.in", overwrite: true });
        });
        wrap.addEventListener('mouseleave', function() {
            clearTimeout(hoverTimeout);
            img.style.transform = '';
            img.style.transformOrigin = '';
            img.style.transition = '';
            gsap.to(label, { opacity: 0, y: 20, duration: 0.18, ease: "power2.in", overwrite: true });
        });
    });

    // Player dropdown logic (new)
    document.querySelectorAll('.player-toggle').forEach(function(btn) {
        btn.addEventListener('click', function() {
            const box = btn.closest('.player-box');
            const dropdown = box.querySelector('.player-dropdown');
            const inner = box.querySelector('.player-dropdown-inner');
            box.classList.toggle('open');
            if (box.classList.contains('open')) {
                // Hide instantly, then fade in
                gsap.set(inner, { opacity: 0, y: 20, display: "block" });
                gsap.to(inner, { opacity: 1, y: 0, duration: 0.32, ease: "power2.out", delay: 0.05 });
            } else {
                // Fade out, then hide
                gsap.to(inner, { opacity: 0, y: 20, duration: 0.22, ease: "power2.in", onComplete: function() {
                    gsap.set(inner, { clearProps: "opacity,transform,display" });
                }});
            }
        });
    });

    // GSAP fade-in on scroll for .what-text and .about-text
    gsap.registerPlugin(ScrollTrigger);
    gsap.utils.toArray(['.what-text', '.about-text']).forEach(function(el) {
        gsap.fromTo(el, 
            { opacity: 0, y: 40 },
            { 
                opacity: 1, 
                y: 0, 
                duration: 0.8, 
                ease: "power2.out",
                scrollTrigger: {
                    trigger: el,
                    start: "top 80%",
                    toggleActions: "play none none none"
                }
            }
        );
    });

    // GSAP hover animation for .what-text (slide right)
    const whatText = document.querySelector('.what-text');
    if (whatText) {
        whatText.addEventListener('mouseenter', function() {
            gsap.to(whatText, { x: 14, scale: 1.02, boxShadow: "0 6px 24px 0 rgba(0,0,0,0.13)", duration: 0.22, ease: "power2.out" });
        });
        whatText.addEventListener('mouseleave', function() {
            gsap.to(whatText, { x: 0, scale: 1, boxShadow: "0 2px 12px 0 rgba(0,0,0,0.08)", duration: 0.22, ease: "power2.in" });
        });
    }

    // GSAP hover animation for .about-text (slide left)
    const aboutText = document.querySelector('.about-text');
    if (aboutText) {
        aboutText.addEventListener('mouseenter', function() {
            gsap.to(aboutText, { x: -14, scale: 1.02, boxShadow: "0 6px 24px 0 rgba(0,0,0,0.13)", duration: 0.22, ease: "power2.out" });
        });
        aboutText.addEventListener('mouseleave', function() {
            gsap.to(aboutText, { x: 0, scale: 1, boxShadow: "0 2px 12px 0 rgba(0,0,0,0.08)", duration: 0.22, ease: "power2.in" });
        });
    }

    // GSAP hover animation for player-main (pop up effect)
    document.querySelectorAll('.player-main').forEach(function(el) {
        el.addEventListener('mouseenter', function() {
            gsap.to(el, { scale: 1.045, boxShadow: "0 8px 28px 0 rgba(0,0,0,0.16)", duration: 0.18, ease: "power2.out" });
        });
        el.addEventListener('mouseleave', function() {
            gsap.to(el, { scale: 1, boxShadow: "0 2px 12px 0 rgba(0,0,0,0.08)", duration: 0.18, ease: "power2.in" });
        });
    });

    // GSAP slow zoom-in for group photo on page load
    const groupPhoto = document.querySelector('.group-photo');
    if (groupPhoto) {
        groupPhoto.style.willChange = 'transform';
        groupPhoto.style.display = 'block';
        groupPhoto.style.maxWidth = '100vw';
        groupPhoto.style.objectFit = 'cover';
        groupPhoto.style.overflow = 'hidden';
        gsap.fromTo(
            groupPhoto,
            { scale: 1 },
            { scale: 1.12, duration: 7, ease: "power1.inOut", transformOrigin: "50% 50%" }
        );
    }

    // Gallery lightbox for screenshots
    document.querySelectorAll('.gallery-img').forEach(function(img) {
        img.addEventListener('click', function() {
            // Create lightbox elements
            const backdrop = document.createElement('div');
            backdrop.className = 'gallery-lightbox-backdrop';
            const fullImg = document.createElement('img');
            fullImg.className = 'gallery-lightbox-img';
            fullImg.src = img.src;
            fullImg.alt = img.alt;

            // Try to get label from the gallery image's alt or data-label
            let labelText = img.getAttribute('data-label') || img.getAttribute('alt') || '';
            if (labelText) {
                const label = document.createElement('div');
                label.className = 'gallery-lightbox-label';
                label.textContent = labelText;
                // Position label absolutely over the image
                backdrop.appendChild(label);
            }

            const closeBtn = document.createElement('button');
            closeBtn.className = 'gallery-lightbox-close';
            closeBtn.innerHTML = '&times;';

            // Close logic
            function closeLightbox() {
                document.body.removeChild(backdrop);
            }
            closeBtn.addEventListener('click', closeLightbox);
            backdrop.addEventListener('click', function(e) {
                if (e.target === backdrop) closeLightbox();
            });
            document.addEventListener('keydown', function escListener(e) {
                if (e.key === 'Escape') {
                    closeLightbox();
                    document.removeEventListener('keydown', escListener);
                }
            });

            // Append
            backdrop.appendChild(fullImg);
            backdrop.appendChild(closeBtn);
            document.body.appendChild(backdrop);
        });
    });

    // Show more/less screenshots button logic
    (function() {
        var btnMore = document.getElementById('show-more-screenshots');
        var btnLess = document.getElementById('show-less-screenshots');
        if (btnMore && btnLess) {
            btnMore.addEventListener('click', function() {
                document.querySelectorAll('.gallery-img-extra').forEach(function(img) {
                    img.style.display = 'inline-block';
                });
                btnMore.style.display = 'none';
                btnLess.style.display = '';
            });
            btnLess.addEventListener('click', function() {
                document.querySelectorAll('.gallery-img-extra').forEach(function(img) {
                    img.style.display = 'none';
                });
                btnMore.style.display = '';
                btnLess.style.display = 'none';
                // Optionally scroll back to the screenshots section
                var grid = document.getElementById('gallery-images-grid');
                if (grid) {
                    grid.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        }
    })();

    // Gallery lightbox for screenshots with left/right arrows
    (function() {
        const images = Array.from(document.querySelectorAll('.gallery-img'));
        images.forEach(function(img, idx) {
            img.addEventListener('click', function() {
                let currentIndex = idx;

                // Create lightbox elements
                const backdrop = document.createElement('div');
                backdrop.className = 'gallery-lightbox-backdrop';

                const fullImg = document.createElement('img');
                fullImg.className = 'gallery-lightbox-img';
                fullImg.src = images[currentIndex].src;
                fullImg.alt = images[currentIndex].alt;

                // Label
                let labelText = images[currentIndex].getAttribute('data-label') || images[currentIndex].getAttribute('alt') || '';
                let label = null;
                if (labelText) {
                    label = document.createElement('div');
                    label.className = 'gallery-lightbox-label';
                    label.textContent = labelText;
                    backdrop.appendChild(label);
                }

                // Close button
                const closeBtn = document.createElement('button');
                closeBtn.className = 'gallery-lightbox-close';
                closeBtn.innerHTML = '&times;';

                // Left arrow
                const leftBtn = document.createElement('button');
                leftBtn.className = 'gallery-lightbox-arrow gallery-lightbox-arrow-left';
                leftBtn.innerHTML = '&lt;';
                leftBtn.style.fontFamily = "'Minecraft', Arial, sans-serif";

                // Right arrow
                const rightBtn = document.createElement('button');
                rightBtn.className = 'gallery-lightbox-arrow gallery-lightbox-arrow-right';
                rightBtn.innerHTML = '&gt;';
                rightBtn.style.fontFamily = "'Minecraft', Arial, sans-serif";

                // Navigation logic
                function showImage(newIdx, direction) {
                    if (newIdx < 0) newIdx = images.length - 1;
                    if (newIdx >= images.length) newIdx = 0;
                    gsap.to(fullImg, { opacity: 0, x: direction === 'left' ? 80 : -80, duration: 0.22, onComplete: function() {
                        fullImg.src = images[newIdx].src;
                        fullImg.alt = images[newIdx].alt;
                        let newLabelText = images[newIdx].getAttribute('data-label') || images[newIdx].getAttribute('alt') || '';
                        if (label) label.textContent = newLabelText;
                        gsap.fromTo(fullImg, { opacity: 0, x: direction === 'left' ? -80 : 80 }, { opacity: 1, x: 0, duration: 0.22 });
                    }});
                    currentIndex = newIdx;
                }

                leftBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    showImage(currentIndex - 1, 'left');
                });
                rightBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    showImage(currentIndex + 1, 'right');
                });

                // Keyboard navigation
                function keyListener(e) {
                    if (e.key === 'ArrowLeft') {
                        showImage(currentIndex - 1, 'left');
                    } else if (e.key === 'ArrowRight') {
                        showImage(currentIndex + 1, 'right');
                    } else if (e.key === 'Escape') {
                        closeLightbox();
                    }
                }

                // Close logic
                function closeLightbox() {
                    // Remove the backdrop and all its children, no matter what image is shown
                    if (backdrop.parentNode) {
                        backdrop.parentNode.removeChild(backdrop);
                    }
                    document.removeEventListener('keydown', keyListener);
                }
                closeBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    closeLightbox();
                });
                backdrop.addEventListener('click', function(e) {
                    if (e.target === backdrop) closeLightbox();
                });
                document.addEventListener('keydown', keyListener);

                // Append
                backdrop.appendChild(fullImg);
                backdrop.appendChild(closeBtn);
                backdrop.appendChild(leftBtn);
                backdrop.appendChild(rightBtn);
                document.body.appendChild(backdrop);
            });
        });
    })();
    </script>
</body>
</html>
